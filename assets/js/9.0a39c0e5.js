(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{333:function(t,s,a){t.exports=a.p+"assets/img/webpackhotupdate.3e7e1293.jpg"},334:function(t,s,a){t.exports=a.p+"assets/img/scopehoisting.cc6c6320.png"},335:function(t,s,a){t.exports=a.p+"assets/img/scopehoisting2.d539386f.png"},336:function(t,s,a){t.exports=a.p+"assets/img/lintpipeline.78aa1c68.png"},360:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"webpack-简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-简介"}},[t._v("#")]),t._v(" webpack 简介")]),t._v(" "),e("h3",{attrs:{id:"为什么选择-webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么选择-webpack"}},[t._v("#")]),t._v(" 为什么选择 webpack")]),t._v(" "),e("ul",[e("li",[t._v("社区生态丰富")]),t._v(" "),e("li",[t._v("官方插件多")]),t._v(" "),e("li",[t._v("配置灵活")])]),t._v(" "),e("h3",{attrs:{id:"初识-webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初识-webpack"}},[t._v("#")]),t._v(" 初识 webpack")]),t._v(" "),e("ul",[e("li",[t._v("默认配置文件 "),e("code",[t._v("webpack.config.js")])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",[t._v("可以通过"),e("code",[t._v("webpack --config")]),t._v(" 指定配置文件")])]),t._v(" "),e("h4",{attrs:{id:"配置组成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置组成"}},[t._v("#")]),t._v(" 配置组成")]),t._v(" "),e("ul",[e("li",[t._v("entry 打包的入口文件")]),t._v(" "),e("li",[t._v("output 打包的输出")]),t._v(" "),e("li",[t._v("mode 环境")]),t._v(" "),e("li",[t._v("module\n"),e("ul",[e("li",[t._v("rules Loader 配置")]),t._v(" "),e("li",[t._v("plugins 插件")])])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",[t._v("零配置 webpack 只包含 entry output")])]),t._v(" "),e("h3",{attrs:{id:"安装-webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-webpack"}},[t._v("#")]),t._v(" 安装 webpack")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",[t._v("webpack 4 将 webpack 和 webpack-cli 做了分离 所以在开发时需要同时安装两者")])]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" xx\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" xx\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init -y\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" webpack webpack-cli --save-dev\n./node_modules/.bin/webpack -v\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("h3",{attrs:{id:"webpack-初体验"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-初体验"}},[t._v("#")]),t._v(" webpack 初体验")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.js")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/index.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bundle.js"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br")])]),e("p",[t._v("配置好后在终端运行"),e("code",[t._v("./node_modules/.bin/webpack")]),t._v("即可打包")]),t._v(" "),e("p",[t._v("每次在终端运行太过麻烦，可以通过"),e("code",[t._v("npm run build")]),t._v("运行构建")]),t._v(" "),e("p",[t._v("在"),e("code",[t._v("package.json")]),t._v("中加入")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",[t._v("原理：模块局部安装会在"),e("code",[t._v("node_modules/.bin")]),t._v("目录创建软连接")])]),t._v(" "),e("h2",{attrs:{id:"webpack-基础用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-基础用法"}},[t._v("#")]),t._v(" webpack 基础用法")]),t._v(" "),e("h3",{attrs:{id:"核心概念-entry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心概念-entry"}},[t._v("#")]),t._v(" 核心概念 - entry")]),t._v(" "),e("ul",[e("li",[t._v("单入口 entry 是一个字符串")]),t._v(" "),e("li",[t._v("多入口 entry 是一个对象")])]),t._v(" "),e("h3",{attrs:{id:"核心概念-output"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心概念-output"}},[t._v("#")]),t._v(" 核心概念 - output")]),t._v(" "),e("p",[t._v("output 用来告诉 webpack 如何将编译后的文件输出到磁盘")]),t._v(" "),e("ul",[e("li",[t._v("单入口 只需指定 filename, path 即可")]),t._v(" "),e("li",[t._v("多入口 通过占位符确保文件名称的唯一 "),e("code",[t._v("filename:'[name].js'")])])]),t._v(" "),e("h3",{attrs:{id:"核心概念-loaders"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心概念-loaders"}},[t._v("#")]),t._v(" 核心概念 - loaders")]),t._v(" "),e("p",[t._v("webpack 本身只支持 JS 和 JSON 两种文件类型，通过 loader 去支持其他文件类型并把它们转化成有效的模块添加到依赖图中")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",[t._v("Loaders 本身是一个函数 接收源文件作为参数 返回转换结果")])]),t._v(" "),e("h4",{attrs:{id:"常见-loaders-有哪些？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见-loaders-有哪些？"}},[t._v("#")]),t._v(" 常见 Loaders 有哪些？")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("babel-loader")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("转换 ES6、ES7 等新特性语法")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("css-loader")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v(".css 文件的加载和解析")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("less-loader")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("less 文件转换成 css")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("ts-loader")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("ts 转换成 js")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("file-loader")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("进行图片、字体等打包")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("raw-loader")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将文件以字符串的形式导入")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("thread-loader")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("多进程打包 JS CSS")])])])]),t._v(" "),e("h4",{attrs:{id:"loaders-用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loaders-用法"}},[t._v("#")]),t._v(" Loaders 用法")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("test")]),t._v("指定匹配规则")]),t._v(" "),e("li",[e("code",[t._v("use")]),t._v("指定使用的 loader 名称")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("module"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  rules"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.txt$/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" use"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"raw-loader"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("h3",{attrs:{id:"核心概念-plugins"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心概念-plugins"}},[t._v("#")]),t._v(" 核心概念 - plugins")]),t._v(" "),e("p",[t._v("用于 bundle 文件的优化，资源管理和环境变量注入，作用于整个构建过程。")]),t._v(" "),e("p",[e("strong",[t._v("由于插件可以携带参数/选项，你必须在 webpack 配置中，向 plugins 属性传入 new 实例。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",[t._v("用 loader 完成不了的事情可以用 plugins 完成")])]),t._v(" "),e("h4",{attrs:{id:"常见-loaders-有哪些？-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见-loaders-有哪些？-2"}},[t._v("#")]),t._v(" 常见 Loaders 有哪些？")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CommonsChunkPlugin")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将 chunks 相同的模块代码提取成公告 js")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CleanWebpackPlugin")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("清理构建目录")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("ExtractTextWebpackPlugin")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将 CSS 从 bundle 里提取成一个独立 CSS 文件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CopyWebpackPlugin")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将文件或者文件夹拷贝到构建的输出目录")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("HtmlWebpackPlugin")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("创建 html 文件去承载输出的 bundle")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("UglifyjsWebpackPlugin")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("压缩 JS")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("ZipWebpackPlugin")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将打包出的资源生成一个 zip 包")])])])]),t._v(" "),e("h3",{attrs:{id:"核心概念-mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心概念-mode"}},[t._v("#")]),t._v(" 核心概念 - mode")]),t._v(" "),e("p",[t._v("用来指定当前的构建环境是 "),e("code",[t._v("production")]),t._v(" "),e("code",[t._v("development")]),t._v(" 还是 "),e("code",[t._v("none")])]),t._v(" "),e("h3",{attrs:{id:"解析-es6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解析-es6"}},[t._v("#")]),t._v(" 解析 ES6")]),t._v(" "),e("ul",[e("li",[t._v("使用 babel-loader 配置文件为"),e("code",[t._v(".babelrc")])])]),t._v(" "),e("p",[e("code",[t._v("npm i @babel/core @babel/preset-env babel-loader -D")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .babelrc")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"preset"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("h3",{attrs:{id:"解析-css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解析-css"}},[t._v("#")]),t._v(" 解析 CSS")]),t._v(" "),e("ul",[e("li",[t._v("css-loader 用于加载.css 文件并转换成 commonjs 对象")]),t._v(" "),e("li",[t._v("style-loader 将样式通过"),e("code",[t._v("<style>")]),t._v("标签插入到 head 中")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",[t._v("因为 loader 是链式调用（从右往左）所以要先写 style 后写 css")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  test"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/.css$/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  use"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style-loader'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("h3",{attrs:{id:"解析-less-和-sass"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解析-less-和-sass"}},[t._v("#")]),t._v(" 解析 Less 和 Sass")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  test"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/.sass$/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  use"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style-loader'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sass-loader'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("h3",{attrs:{id:"解析图片-字体"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解析图片-字体"}},[t._v("#")]),t._v(" 解析图片 字体")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("使用 file-loader")]),t._v(" "),e("ul",[e("li",[t._v("图片："),e("code",[t._v("test:/.(png|jpg|gif|jpeg)$/")])])])]),t._v(" "),e("li",[e("p",[t._v("使用 url-loader")]),t._v(" "),e("ul",[e("li",[t._v("可以设置较小资源自动 base64")]),t._v(" "),e("li",[t._v("内部是使用 file-loader")]),t._v(" "),e("li",[t._v("传递参数"),e("code",[t._v("options:{limit:10240}")]),t._v("小于 10kb 自动 base64")])])])]),t._v(" "),e("h3",{attrs:{id:"webpack-中的文件监听"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-中的文件监听"}},[t._v("#")]),t._v(" webpack 中的文件监听")]),t._v(" "),e("blockquote",[e("p",[t._v("文件监听是在源码发生变化时自动重新构建出新的输出文件")])]),t._v(" "),e("p",[t._v("两种开启监听模式的方法：")]),t._v(" "),e("ul",[e("li",[t._v("启动 webpack 命令时带上"),e("code",[t._v("--watch")]),t._v("参数\n"),e("ul",[e("li",[t._v("script 中加入"),e("code",[t._v('"watch":"webpack --watch"')])]),t._v(" "),e("li",[t._v("唯一缺陷：每次需要手动刷新浏览器")])])]),t._v(" "),e("li",[t._v("配置 webpack.config.js 中设置"),e("code",[t._v("watch:true")])])]),t._v(" "),e("h4",{attrs:{id:"原理分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原理分析"}},[t._v("#")]),t._v(" 原理分析")]),t._v(" "),e("p",[e("strong",[t._v("轮询判断文件最后编辑时间是否发生变化")]),e("br"),t._v("\n如发生变化并不会立刻告诉监听者，而是缓存等待 aggregateTimeout")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("modelu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("export "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  watch"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  watchOptions"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ignored"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/node_modules/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可提高性能")]),t._v("\n    aggregateTimeout"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//监听到变化时等300ms再去执行")]),t._v("\n    poll"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//轮询 每秒1000次")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("h3",{attrs:{id:"热更新-webpack-dev-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#热更新-webpack-dev-server"}},[t._v("#")]),t._v(" 热更新 webpack-dev-server")]),t._v(" "),e("ul",[e("li",[t._v("WDS 不需要刷新浏览器")]),t._v(" "),e("li",[t._v("WDS 不输出文件 而是放在内存中")]),t._v(" "),e("li",[t._v("和 HotModuleReplacementPlugin 配合使用")])]),t._v(" "),e("p",[t._v("脚本："),e("code",[t._v('"dev":"webpack-dev-server --open"')])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HotModuleReplacementPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\ndevServer"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  contentBase"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dist'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  hot"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",[t._v("使用 webpack-dev-middleware 也可以进行热更新但是需要设置 node 服务器")])]),t._v(" "),e("h4",{attrs:{id:"原理分析-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原理分析-2"}},[t._v("#")]),t._v(" 原理分析")]),t._v(" "),e("p",[e("img",{attrs:{src:a(333),alt:""}})]),t._v(" "),e("h3",{attrs:{id:"文件指纹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文件指纹"}},[t._v("#")]),t._v(" 文件指纹")]),t._v(" "),e("blockquote",[e("p",[t._v("文件指纹就是"),e("strong",[t._v("打包后输出的文件名的后缀")])])]),t._v(" "),e("h4",{attrs:{id:"如何生成文件指纹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何生成文件指纹"}},[t._v("#")]),t._v(" 如何生成文件指纹")]),t._v(" "),e("ul",[e("li",[t._v("Hash:和整个项目的构建相关，只要项目有修改，整个项目的 hash 值就会改变")]),t._v(" "),e("li",[t._v("Chunkhash:和 webpack 打包的 chunk 有关，不同的 entry 会生成不同的 chunkhash 值")]),t._v(" "),e("li",[t._v("Contenthash:根据文件内容来定义 hash，文件内容不变则不变")])]),t._v(" "),e("h4",{attrs:{id:"js-的文件指纹设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js-的文件指纹设置"}},[t._v("#")]),t._v(" JS 的文件指纹设置")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("output"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  filename"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[name]_[chunkhash:8].js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("h4",{attrs:{id:"css-的文件指纹设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css-的文件指纹设置"}},[t._v("#")]),t._v(" CSS 的文件指纹设置")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",[t._v("该 plugin 会把 css 提取成独立文件 与 style-loader 冲突")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MiniCssRxtractPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token template-string"}},[e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("[name]_[contenthash:8].css")]),e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("h4",{attrs:{id:"图片-的文件指纹设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图片-的文件指纹设置"}},[t._v("#")]),t._v(" 图片 的文件指纹设置")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("use"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    loader"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file-loader"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"img/[name]_[hash:8].[ext]"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",[t._v("将生产和开发环境配置分开分别为 webpack.prod.js 和 webpack.dev.js"),e("br"),t._v("\n并在脚本处添加 --config [配置文件]")])]),t._v(" "),e("h3",{attrs:{id:"代码压缩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码压缩"}},[t._v("#")]),t._v(" 代码压缩")]),t._v(" "),e("h4",{attrs:{id:"js-文件的压缩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js-文件的压缩"}},[t._v("#")]),t._v(" JS 文件的压缩")]),t._v(" "),e("p",[t._v("内置了 uglifyjs-webpack-plugin")]),t._v(" "),e("h4",{attrs:{id:"css-文件的压缩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css-文件的压缩"}},[t._v("#")]),t._v(" CSS 文件的压缩")]),t._v(" "),e("ul",[e("li",[t._v("使用 optimize-css-assets-webpack-plugin")]),t._v(" "),e("li",[t._v("同时使用 cssnano")])]),t._v(" "),e("h4",{attrs:{id:"html-文件的压缩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#html-文件的压缩"}},[t._v("#")]),t._v(" html 文件的压缩")]),t._v(" "),e("p",[t._v("修改 html-webpack-plugin 设置压缩参数"),e("br"),t._v("\n通常一个页面对应一个 plugin")]),t._v(" "),e("h2",{attrs:{id:"webpack-进阶用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-进阶用法"}},[t._v("#")]),t._v(" webpack 进阶用法")]),t._v(" "),e("h3",{attrs:{id:"自动清理构建目录产物"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自动清理构建目录产物"}},[t._v("#")]),t._v(" 自动清理构建目录产物")]),t._v(" "),e("p",[t._v("每次构建的时候不会清理目录，造成构建的输出目录 output 文件越来越多")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("通过 npm scripts 清理目录")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("rm -rm ./dist && webpack")])]),t._v(" "),e("li",[e("code",[t._v("rimraf ./dist && webpack")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("使用 clean-webpack-plugin")]),t._v(" ✔️")])])]),t._v(" "),e("h3",{attrs:{id:"postcss-插件-autoprefixer-自动补齐-css3-前缀"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#postcss-插件-autoprefixer-自动补齐-css3-前缀"}},[t._v("#")]),t._v(" PostCSS 插件 autoprefixer 自动补齐 CSS3 前缀")]),t._v(" "),e("h4",{attrs:{id:"为什么-css3-属性需要前缀"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么-css3-属性需要前缀"}},[t._v("#")]),t._v(" 为什么 CSS3 属性需要前缀")]),t._v(" "),e("p",[t._v("浏览器内核不统一 如-moz -webkit")]),t._v(" "),e("h4",{attrs:{id:"如何自动补齐"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何自动补齐"}},[t._v("#")]),t._v(" 如何自动补齐")]),t._v(" "),e("p",[e("strong",[t._v("使用 autoprefixer 插件")]),t._v("（后置处理）根据 caniuse.com 原则")]),t._v(" "),e("p",[t._v("通常和 postcss-loader 一起使用")]),t._v(" "),e("h3",{attrs:{id:"移动端-css-px-自动转-rem"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#移动端-css-px-自动转-rem"}},[t._v("#")]),t._v(" 移动端 CSS px 自动转 rem")]),t._v(" "),e("h4",{attrs:{id:"浏览器的分辨率"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的分辨率"}},[t._v("#")]),t._v(" 浏览器的分辨率")]),t._v(" "),e("ul",[e("li",[t._v("之前使用媒体查询实现响应式布局 缺陷：需要编写多套适配样式代码")]),t._v(" "),e("li",[t._v("现在使用 rem：font-size of the root element")])]),t._v(" "),e("p",[e("strong",[t._v("使用 px2rem-loader 配合 lib-flexible 库（根据分辨率自动计算根元素 font-size）")])]),t._v(" "),e("h3",{attrs:{id:"静态资源内联"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#静态资源内联"}},[t._v("#")]),t._v(" 静态资源内联")]),t._v(" "),e("h4",{attrs:{id:"资源内联的意义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#资源内联的意义"}},[t._v("#")]),t._v(" 资源内联的意义")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("代码层面")]),t._v(" "),e("ul",[e("li",[t._v("页面框架的初始化脚本")]),t._v(" "),e("li",[t._v("上报相关打点")]),t._v(" "),e("li",[t._v("css 内联避免页面闪动")])])]),t._v(" "),e("li",[e("p",[t._v("请求层面：减少 HTTP 网络请求数")]),t._v(" "),e("ul",[e("li",[t._v("小图片或者字体内联 url-loader")])])])]),t._v(" "),e("h4",{attrs:{id:"js-和-html-内联"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js-和-html-内联"}},[t._v("#")]),t._v(" JS 和 HTMl 内联")]),t._v(" "),e("ul",[e("li",[t._v("raw-loader")])]),t._v(" "),e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  ${require('raw-loader!./meta.html')}\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("document"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token script"}},[e("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'raw-loader!babel-loader!../../node_modules/lib-flexible/flexible.js'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("h4",{attrs:{id:"css-内联"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css-内联"}},[t._v("#")]),t._v(" CSS 内联")]),t._v(" "),e("ul",[e("li",[t._v("style-loader options 设置"),e("code",[t._v("singleton:true")])]),t._v(" "),e("li",[t._v("html-inline-css-webpack-plugin ✔️")])]),t._v(" "),e("h3",{attrs:{id:"多页面应用打包通用方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多页面应用打包通用方案"}},[t._v("#")]),t._v(" 多页面应用打包通用方案")]),t._v(" "),e("h4",{attrs:{id:"多页面应用-mpa-概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多页面应用-mpa-概念"}},[t._v("#")]),t._v(" 多页面应用(MPA)概念")]),t._v(" "),e("p",[e("strong",[t._v("每一次页面跳转时后台服务器都会给返回一个新的 html 文档")])]),t._v(" "),e("ul",[e("li",[t._v("每个页面解耦")]),t._v(" "),e("li",[t._v("对 SEO 更加友好")])]),t._v(" "),e("h4",{attrs:{id:"多页面打包基本思路"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多页面打包基本思路"}},[t._v("#")]),t._v(" 多页面打包基本思路")]),t._v(" "),e("p",[e("strong",[t._v("每个页面对应一个 entry ➕ 一个 html-webpack-plugin")]),t._v("\n缺点：每次新增或删除页面需要修改 webpack 配置")]),t._v(" "),e("h4",{attrs:{id:"多页面打包通用方案-✔️"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多页面打包通用方案-✔️"}},[t._v("#")]),t._v(" 多页面打包通用方案 ✔️")]),t._v(" "),e("p",[e("strong",[t._v("动态获取 entry 并设置 html-webpack-plugin 数量")])]),t._v(" "),e("ul",[e("li",[t._v("利用 glob.sync\n"),e("ul",[e("li",[t._v("命名遵循: ./src/页面名/index.js")]),t._v(" "),e("li",[e("code",[t._v("entry:glob.sync(path.join(__dirname,'./src/*/index.js'))")])])])])]),t._v(" "),e("h3",{attrs:{id:"使用-sourcemap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-sourcemap"}},[t._v("#")]),t._v(" 使用 sourceMap")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devtool"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"source-map"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[e("strong",[t._v("通过 sourceMap 定位到源码")])]),t._v(" "),e("ul",[e("li",[t._v("开发环境开启，线上环境关闭")]),t._v(" "),e("li",[t._v("线上排查问题的时候可以将 sourcemap 上传到错误监控系统")])]),t._v(" "),e("h4",{attrs:{id:"sourcemap-关键字"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sourcemap-关键字"}},[t._v("#")]),t._v(" sourceMap 关键字")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("eval")]),t._v(" 使用 eval 包裹模块代码")]),t._v(" "),e("li",[e("code",[t._v("source map")]),t._v(" 产生.map 文件")]),t._v(" "),e("li",[e("code",[t._v("cheap")]),t._v(" 报错定位 不包含列信息")]),t._v(" "),e("li",[e("code",[t._v("inline")]),t._v(" 将.map 作为 DataURI 嵌入，不单独生成.map 文件 内联到 JS 文件")]),t._v(" "),e("li",[e("code",[t._v("module")]),t._v(" 包含 loader 的 sourceMap")])]),t._v(" "),e("h3",{attrs:{id:"提取公共资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提取公共资源"}},[t._v("#")]),t._v(" 提取公共资源")]),t._v(" "),e("h4",{attrs:{id:"基础库分离-react-vue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基础库分离-react-vue"}},[t._v("#")]),t._v(" 基础库分离 react/vue")]),t._v(" "),e("ul",[e("li",[t._v("思路：将 react/react-dom 基础包通过 cdn 引入 不打入 bundle 中")]),t._v(" "),e("li",[t._v("方法：使用 html-webpack-externals-plugins")])]),t._v(" "),e("h4",{attrs:{id:"利用-splitchunksplugin-进行公共脚本分离"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#利用-splitchunksplugin-进行公共脚本分离"}},[t._v("#")]),t._v(" 利用 SplitChunksPlugin 进行公共脚本分离")]),t._v(" "),e("ul",[e("li",[t._v("wp4 内置 代替 CommonsChunkPlugin")]),t._v(" "),e("li",[t._v("参数说明\n"),e("ul",[e("li",[e("code",[t._v("async")]),t._v("异步引入的库进行分离（默认）")]),t._v(" "),e("li",[e("code",[t._v("initial")]),t._v("同步引入的库进行分离")]),t._v(" "),e("li",[e("code",[t._v("all")]),t._v("所有引入的库进行分离")])])])]),t._v(" "),e("h4",{attrs:{id:"利用-splitchunksplugin-分离基础包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#利用-splitchunksplugin-分离基础包"}},[t._v("#")]),t._v(" 利用 SplitChunksPlugin 分离基础包")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("test")]),t._v(" 匹配需要分离的包")])]),t._v(" "),e("h4",{attrs:{id:"利用-splitchunksplugin-分离页面公共文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#利用-splitchunksplugin-分离页面公共文件"}},[t._v("#")]),t._v(" 利用 SplitChunksPlugin 分离页面公共文件")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("minChunks")]),t._v(" 设置最小引用次数")]),t._v(" "),e("li",[e("code",[t._v("minSize")]),t._v(" 分离的包体积大小")])]),t._v(" "),e("h3",{attrs:{id:"tree-shaking-摇树优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tree-shaking-摇树优化"}},[t._v("#")]),t._v(" tree shaking 摇树优化")]),t._v(" "),e("ul",[e("li",[t._v("概念：只把用到的方法打入 bundle，没用到的方法会在 uglify 阶段被擦出掉")]),t._v(" "),e("li",[t._v("使用：webpack 默认支持，在.babelrc 里设置 modules:false 即可\n"),e("ul",[e("li",[t._v("production mode 默认开启")])])]),t._v(" "),e("li",[t._v("要求：必须是 ES6 语法")])]),t._v(" "),e("h4",{attrs:{id:"dce"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dce"}},[t._v("#")]),t._v(" DCE")]),t._v(" "),e("ul",[e("li",[t._v("代码不会被执行")]),t._v(" "),e("li",[t._v("代码执行的结果不会被用到")]),t._v(" "),e("li",[t._v("代码只会影响死变量（只写不读）")])]),t._v(" "),e("h4",{attrs:{id:"tree-shaking-原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tree-shaking-原理"}},[t._v("#")]),t._v(" tree shaking 原理")]),t._v(" "),e("p",[e("strong",[t._v("利用 ES6 模块特点")])]),t._v(" "),e("ul",[e("li",[t._v("只能作为模块顶层语句出现")]),t._v(" "),e("li",[t._v("import 的模块名只能是字符串常量")]),t._v(" "),e("li",[t._v("import binding 是 immutable 的")])]),t._v(" "),e("p",[e("strong",[t._v("uglify 阶段删除无用代码")])]),t._v(" "),e("h3",{attrs:{id:"scope-hoisting"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scope-hoisting"}},[t._v("#")]),t._v(" scope hoisting")]),t._v(" "),e("p",[t._v("构建后的代码存在大量闭包，将导致：")]),t._v(" "),e("ul",[e("li",[t._v("大量闭包包裹代码，体积增大")]),t._v(" "),e("li",[t._v("运行代码时创建的函数作用域变多，内存开销变大")])]),t._v(" "),e("h4",{attrs:{id:"模块转换分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模块转换分析"}},[t._v("#")]),t._v(" 模块转换分析")]),t._v(" "),e("p",[e("img",{attrs:{src:a(334),alt:""}}),t._v(" "),e("img",{attrs:{src:a(335),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"scope-hoisting-原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scope-hoisting-原理"}},[t._v("#")]),t._v(" scope hoisting 原理")]),t._v(" "),e("ul",[e("li",[t._v("原理：将所有模块代码按照引用顺序放在一个函数作用域里，然后适当重命名一些变量以防止变量名冲突")]),t._v(" "),e("li",[t._v("对比：通过 scope hoisting 可以"),e("strong",[t._v("减少函数声明代码和内存开销")])])]),t._v(" "),e("h4",{attrs:{id:"scope-hoisting-使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scope-hoisting-使用"}},[t._v("#")]),t._v(" scope hoisting 使用")]),t._v(" "),e("ul",[e("li",[t._v("production mode 默认开启")]),t._v(" "),e("li",[t._v("必须是 ES6 语法")])]),t._v(" "),e("h3",{attrs:{id:"代码分割和动态-import"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码分割和动态-import"}},[t._v("#")]),t._v(" 代码分割和动态 import")]),t._v(" "),e("h4",{attrs:{id:"代码分割的意义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码分割的意义"}},[t._v("#")]),t._v(" 代码分割的意义")]),t._v(" "),e("p",[t._v("对于大的 web 应用来说，将所有的代码都放在一个文件中显然是不够有效的，特别适合当你的某些代码块是在某些特殊的时候才会被用到。webpack 有一个功能就是将你的代码库分割成 chunks（语块）当代码运行到需要他们的时候在进行加载。")]),t._v(" "),e("ul",[e("li",[t._v("适用的场景：\n"),e("ul",[e("li",[t._v("抽离相同代码到一个共享块")]),t._v(" "),e("li",[t._v("脚本懒加载，使得初始下载的代码更小")])])])]),t._v(" "),e("h4",{attrs:{id:"懒加载-js-脚本的方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#懒加载-js-脚本的方式"}},[t._v("#")]),t._v(" 懒加载 JS 脚本的方式")]),t._v(" "),e("ul",[e("li",[t._v("CommonJS : "),e("code",[t._v("require.ensure")])]),t._v(" "),e("li",[t._v("ES6 : 动态 import(需要 babel 转换)\n"),e("ul",[e("li",[t._v("安装 babel 插件"),e("code",[t._v("npm install @babel/plugin-syntax-dynamic-import --save-dev")])]),t._v(" "),e("li",[t._v("babelrc 中新增 plugin")])])])]),t._v(" "),e("h3",{attrs:{id:"使用-eslint"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-eslint"}},[t._v("#")]),t._v(" 使用 ESLint")]),t._v(" "),e("h4",{attrs:{id:"eslint-如何执行落地"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#eslint-如何执行落地"}},[t._v("#")]),t._v(" ESLint 如何执行落地")]),t._v(" "),e("ul",[e("li",[t._v("webpack 与 CI/CD 集成")])]),t._v(" "),e("p",[t._v("在 build 前增加 lint pipeline\n"),e("img",{attrs:{src:a(336),alt:""}})])])}),[],!1,null,null,null);s.default=n.exports}}]);