(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{357:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"第六章-面向对象的程序设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第六章-面向对象的程序设计"}},[t._v("#")]),t._v(" 第六章 面向对象的程序设计")]),t._v(" "),a("h3",{attrs:{id:"_6-1-理解对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-理解对象"}},[t._v("#")]),t._v(" 6.1 理解对象")]),t._v(" "),a("h4",{attrs:{id:"_6-1-1-属性类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-1-属性类型"}},[t._v("#")]),t._v(" 6.1.1 属性类型")]),t._v(" "),a("p",[t._v("ECMAScript 有两种属性：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("数据属性：")]),t._v(" "),a("ul",[a("li",[t._v("Configurable:能否使用 delete 删除属性")]),t._v(" "),a("li",[t._v("Enumerable:能否使用 for-in")]),t._v(" "),a("li",[t._v("Writable:能否修改属性值")]),t._v(" "),a("li",[t._v("Value:包含属性的数据值")])])]),t._v(" "),a("li",[a("p",[t._v("访问器属性：")]),t._v(" "),a("ul",[a("li",[t._v("Configurable:同上")]),t._v(" "),a("li",[t._v("Enumerable:同上")]),t._v(" "),a("li",[t._v("Get")]),t._v(" "),a("li",[t._v("Set")])]),t._v(" "),a("p",[t._v("一般使用 "),a("code",[t._v("object.__defineGetter__('attributeName',funcion())")])])])]),t._v(" "),a("h4",{attrs:{id:"_6-1-2-定义多个属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-2-定义多个属性"}},[t._v("#")]),t._v(" 6.1.2 定义多个属性")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("var book = {}\n\nObject.defineProperties(book, {\n\ta:{\n\t\twritable:true,\n\t\tvalue:1\n\t},\n\tb:{...}\n})\n")])])]),a("h4",{attrs:{id:"_6-1-3-读取属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-3-读取属性"}},[t._v("#")]),t._v(" 6.1.3 读取属性")]),t._v(" "),a("p",[a("code",[t._v("Object.getOwnPropertyDescriptor()")])]),t._v(" "),a("p",[t._v("返回值是一个对象")]),t._v(" "),a("h3",{attrs:{id:"_6-2-创建对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-创建对象"}},[t._v("#")]),t._v(" 6.2 创建对象")]),t._v(" "),a("h4",{attrs:{id:"_6-2-1-工厂模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-1-工厂模式"}},[t._v("#")]),t._v(" 6.2.1 工厂模式")]),t._v(" "),a("blockquote",[a("p",[t._v("使用同一个接口创建很多对象会产生大量重复代码 ⇒ 工厂模式")])]),t._v(" "),a("p",[t._v("用函数把创建对象的细节封装起来")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('function createPerson(name, age, job){\n      var o = new Object();\n      o.name = name;\n      o.age = age;\n      o.job = job;\n      o.sayName = function(){\n          alert(this.name);\n      };\n      return o;\n  }\n\n  var person1 = createPerson("Nicholas", 29, "Software Engineer");\n  var person2 = createPerson("Greg", 27, "Doctor");\n\n  person1.sayName();   //"Nicholas"\n  person2.sayName();   //"Greg"\n')])])]),a("h4",{attrs:{id:"_6-2-2-构造函数模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-2-构造函数模式"}},[t._v("#")]),t._v(" 6.2.2 构造函数模式")]),t._v(" "),a("p",[t._v("如 Object 和 Array 就是原生的构造函数")]),t._v(" "),a("blockquote",[a("p",[t._v("工厂模式解决了创建多个相似对象的问题**(太单一)**却没有解决 "),a("strong",[t._v("对象识别的问题")])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('function Person(name, age, job){\n    this.name = name;\n    this.age = age;\n    this.job = job;\n    this.sayName = function(){\n        alert(this.name);\n    };\n}\n\nvar person1 = new Person("Nicholas", 29, "Software Engineer");\nvar person2 = new Person("Greg", 27, "Doctor");\n\nperson1.sayName();   //"Nicholas"\nperson2.sayName();   //"Greg"\n')])])]),a("h5",{attrs:{id:"与工厂模式不同之处"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#与工厂模式不同之处"}},[t._v("#")]),t._v(" 与工厂模式不同之处:")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("没有显示创建对象")])])]),t._v(" "),a("li",[a("p",[t._v("直接将属性方法赋值给 this")])]),t._v(" "),a("li",[a("p",[t._v("没有 return")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("使用 new 创建并经历以下四个步骤：")])]),t._v(" "),a("p",[t._v("1.创建一个新对象")]),t._v(" "),a("p",[t._v("2.将构造函数作用域赋给新对象 "),a("strong",[t._v("(this 指向新对象)")])]),t._v(" "),a("p",[t._v("3.执行构造函数中的代码")]),t._v(" "),a("p",[t._v("4.返回新对象")])])]),t._v(" "),a("h5",{attrs:{id:"检测对象类型："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测对象类型："}},[t._v("#")]),t._v(" 检测对象类型：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("创建的对象既是 Object 的实例也是 Person 的实例")])]),t._v(" "),a("li",[a("p",[t._v("person1 person2 分别保存着 Person 的一个不同的实例，这两个对象都有一个 constructor 属性，该属性指向 Person (构造函数特有?)")]),t._v(" "),a("p",[t._v("alert(person1 instanceof Object); //true\nalert(person1 instanceof Person); //true\nalert(person2 instanceof Object); //true\nalert(person2 instanceof Person); //true")]),t._v(" "),a("p",[t._v("alert(person1.constructor == Person); //true\nalert(person2.constructor == Person); //true")]),t._v(" "),a("p",[t._v("alert(person1.sayName == person2.sayName); //false")])])]),t._v(" "),a("h5",{attrs:{id:"将构造函数当做函数："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将构造函数当做函数："}},[t._v("#")]),t._v(" 将构造函数当做函数：")]),t._v(" "),a("p",[t._v("任何函数只要通过 new 来调用就是构造函数 与普通函数的唯一区别就是调用方式")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('// 构造函数\nvar person = new Person("Nicholas", 29, "Software Engineer");\nperson.sayName();   //"Nicholas"\n\n// 普通函数\nPerson("Greg", 27, "Doctor");  //adds to window\nwindow.sayName();   //"Greg"\n\n// 在另一对象的作用域中调用\nvar o = new Object();\nPerson.call(o, "Kristen", 25, "Nurse");\no.sayName();    //"Kristen"\n')])])]),a("h4",{attrs:{id:"_6-2-3-原型模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-3-原型模式"}},[t._v("#")]),t._v(" 6.2.3 原型模式")]),t._v(" "),a("blockquote",[a("p",[t._v("构造函数模式的问题：导致不同的作用域链和标识符解析")])]),t._v(" "),a("blockquote",[a("p",[t._v("我们创建的每个函数都有一个 prototype 属性，这个属性是一个指针，指向原型对象")])]),t._v(" "),a("h5",{attrs:{id:"原型模式创建对象："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原型模式创建对象："}},[t._v("#")]),t._v(" 原型模式创建对象：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('function Person(){\n}\n\nPerson.prototype.name = "Nicholas";\nPerson.prototype.age = 29;\nPerson.prototype.job = "Software Engineer";\nPerson.prototype.sayName = function(){\n    alert(this.name);\n};\n\nvar person1 = new Person();\nperson1.sayName();   //"Nicholas"\n\nvar person2 = new Person();\nperson2.sayName();   //"Nicholas"\n\nalert(person1.sayName == person2.sayName);  //true\n')])])]),a("p",[t._v("读取对象的某个属性时，都会执行一次搜索。先从实例本身开始再到原型对象。")]),t._v(" "),a("h5",{attrs:{id:"原型链："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原型链："}},[t._v("#")]),t._v(" 原型链：")]),t._v(" "),a("p",[t._v("Person.prototype → 原型对象")]),t._v(" "),a("p",[t._v("Person.prototype.constructor → Person")]),t._v(" "),a("p",[t._v("person1.[[prototype]] = person1."),a("strong",[t._v("proto")]),t._v(" → 原型对象")]),t._v(" "),a("p",[t._v("person1 与 Person 没有直接联系")]),t._v(" "),a("h5",{attrs:{id:"检测："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测："}},[t._v("#")]),t._v(" 检测：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('alert(Person.prototype.isPrototypeOf(person1));  //true\nalert(Person.prototype.isPrototypeOf(person2));  //true\n\n//only works if Object.getPrototypeOf() is available\nif (Object.getPrototypeOf){\n    alert(Object.getPrototypeOf(person1) == Person.prototype);  //true\n    alert(Object.getPrototypeOf(person1).name);  //"Nicholas"\n}\n')])])]),a("ul",[a("li",[a("p",[t._v("使用"),a("code",[t._v("hasOwnProperty()")]),t._v("方法可以检测一个属性是否存在于实例中")])]),t._v(" "),a("li",[a("p",[t._v("使用"),a("code",[t._v("in")]),t._v("操作符只要该属性能够被访问即返回 true e.g: "),a("code",[t._v("'name' in person1")])])]),t._v(" "),a("li",[a("p",[t._v("要取得对象上所有可枚举的 "),a("strong",[t._v("实例")]),t._v(" 属性可以使用"),a("code",[t._v("Object.keys()")])]),t._v(" "),a("p",[t._v('var keys = Object.keys(Person.prototype);\nalert(keys); //"name,age,job,sayName"')])]),t._v(" "),a("li",[a("p",[t._v("要取得对象上所有 "),a("strong",[t._v("实例")]),t._v(" 属性无论可否枚举使用"),a("code",[t._v("Object.getOwnPropertyNames()")])])])]),t._v(" "),a("h5",{attrs:{id:"更简单的原型语法："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更简单的原型语法："}},[t._v("#")]),t._v(" 更简单的原型语法：")]),t._v(" "),a("p",[t._v("省去每次都要敲一遍 Person.prototype 的麻烦")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('// 原本的原型语法\nfunction Person(){\n}\n\nPerson.prototype.name = "Nicholas";\nPerson.prototype.age = 29;\nPerson.prototype.job = "Software Engineer";\nPerson.prototype.sayName = function(){\n    alert(this.name);\n};\n\n// 更简单的原型语法\nfunction Person(){\n}\n\nPerson.prototype = {\n\t// consructor: Person, 如不设置则constructor不再指向Person而是指向Object\n\tname:\'Nicolas\',\n\tage:29\n};\n')])])]),a("h5",{attrs:{id:"原型的动态性："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原型的动态性："}},[t._v("#")]),t._v(" 原型的动态性：")]),t._v(" "),a("p",[t._v("重写原型对象会切断实例与原有原型的联系")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('/*\n重写前\nfriend.[[prototype]] -> Person Prototype\nPerson.prototype -> Person Prototype\nPerson Prototype.constructor -> Person\n*/\nfunction Person(){\n}\n\nvar friend = new Person();\n\n/*\n重写后\nPerson.prototype -> New Person Prototype\nfriend.[[prototype]] -> Person Prototype\n*/\nPerson.prototype = {\n    constructor: Person,\n    name : "Nicholas",\n    age : 29,\n    job : "Software Engineer",\n    sayName : function () {\n        alert(this.name);\n    }\n};\n\nfriend.sayName();   //error\nfriend.__proto__.constructor.prototype.sayName(); //Nicolas\n')])])]),a("h5",{attrs:{id:"原型模式的问题："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原型模式的问题："}},[t._v("#")]),t._v(" 原型模式的问题：")]),t._v(" "),a("p",[t._v("修改一个实例也会同时修改另一个实例")]),t._v(" "),a("h4",{attrs:{id:"_6-2-4-构造函数-原型模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-4-构造函数-原型模式"}},[t._v("#")]),t._v(" 6.2.4 构造函数 + 原型模式")]),t._v(" "),a("blockquote",[a("p",[t._v("创建自定义类型的最常见方式，就是组合使用构造函数与原型模式。构造函数用于定义实例属性，原型用于定义方法和共享属性。")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('function Person(name, age, job){\n    this.name = name;\n    this.age = age;\n    this.job = job;\n    this.friends = ["Shelby", "Court"];\n}\n\nPerson.prototype = {\n    constructor: Person, // 重点!!!\n    sayName : function () {\n        alert(this.name);\n    }\n};\n\nvar person1 = new Person("Nicholas", 29, "Software Engineer");\nvar person2 = new Person("Greg", 27, "Doctor");\n\nperson1.friends.push("Van");\n\nalert(person1.friends);    //"Shelby,Court,Van"\nalert(person2.friends);    //"Shelby,Court"\nalert(person1.friends === person2.friends);  //false\nalert(person1.sayName === person2.sayName);  //true\n')])])]),a("h3",{attrs:{id:"_6-3-继承"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-继承"}},[t._v("#")]),t._v(" 6.3 继承")]),t._v(" "),a("h4",{attrs:{id:"_6-3-1-原型链"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-1-原型链"}},[t._v("#")]),t._v(" 6.3.1 原型链")]),t._v(" "),a("p",[t._v("原型和原型链的关系 "),a("code",[t._v("instance.constructor.prototype = instance.__proto__")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("function SuperType() {\n\tthis.property = true;\n}\n\nSuperType.prototype.getSuperValue = function() {\n\treturn this.property;\n};\n\nfunction SubType() {\n\tthis.subproperty = false;\n}\n\n//inherit from SuperType\n//原型 继承 原型\nSubType.prototype = new SuperType();\n\nSubType.prototype.getSubValue = function() {\n\treturn this.subproperty;\n};\n\nvar instance = new SubType();\n")])])]),a("p",[a("img",{attrs:{src:"6/Untitled.png",alt:"6/Untitled.png"}})]),t._v(" "),a("h5",{attrs:{id:"完整的原型链："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完整的原型链："}},[t._v("#")]),t._v(" 完整的原型链：")]),t._v(" "),a("p",[t._v("instance 是一个实例 他的"),a("strong",[t._v("proto")]),t._v("等于 SubType.prototype")]),t._v(" "),a("p",[t._v("instance."),a("strong",[t._v("proto")]),t._v(" → subType Prototype = subType.prototype")]),t._v(" "),a("p",[t._v("subType Prototype."),a("strong",[t._v("proto")]),t._v(" → superType Prototype = superType.prototype")]),t._v(" "),a("p",[t._v("superType Prototype."),a("strong",[t._v("proto")]),t._v(" → Object Prototype = Object.prototype")]),t._v(" "),a("h5",{attrs:{id:"谨慎定义方法："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#谨慎定义方法："}},[t._v("#")]),t._v(" 谨慎定义方法：")]),t._v(" "),a("p",[t._v("覆盖超类的某个方法或添加超类不存在的方法时，"),a("strong",[t._v("一定要放在替换原型语句之后。")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("//inherit from SuperType\nSubType.prototype = new SuperType();\n\n//new method\nSubType.prototype.getSubValue = function (){\n    return this.subproperty;\n};\n\n//override existing method\nSubType.prototype.getSuperValue = function (){\n    return false;\n};\n")])])]),a("p",[a("strong",[t._v("不要使用对象字面量创建原型方法，会重写原型链。")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("SubType.prototype = {\n    getSubValue : function (){\n        return this.subproperty;\n    },\n\n    someOtherMethod : function (){\n        return false;\n    }\n};\n\nvar instance = new SubType();\nalert(instance.getSuperValue());   //error!\n")])])]),a("h4",{attrs:{id:"_6-3-2-借用构造函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-2-借用构造函数"}},[t._v("#")]),t._v(" 6.3.2 借用构造函数")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('function SuperType(){\n    this.colors = ["red", "blue", "green"];\n}\n\nfunction SubType(){\n}\n\n//inherit from SuperType\nSubType.prototype = new SuperType();\n\nvar instance1 = new SubType();\ninstance1.colors.push("black");\nalert(instance1.colors);    //"red,blue,green,black"\n\nvar instance2 = new SubType();\nalert(instance2.colors);    //"red,blue,green,black"\n')])])]),a("h4",{attrs:{id:"_6-3-3-组合继承"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-3-组合继承"}},[t._v("#")]),t._v(" 6.3.3 组合继承")]),t._v(" "),a("blockquote",[a("p",[t._v("使用原型链实现对原型属性和方法的继承，通过借用构造函数来实现对实例属性的继承。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父类")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 构造函数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SuperType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colors "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"green"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 原型链")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SuperType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sayName")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子类继承")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 构造函数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SubType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SuperType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 原型链")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SubType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SuperType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SubType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sayAge")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" instance1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SubType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Nicholas"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ninstance1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"black"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"red,blue,green,black"')]),t._v("\ninstance1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"Nicholas";')]),t._v("\ninstance1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayAge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//29")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" instance2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SubType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Greg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"red,blue,green"')]),t._v("\ninstance2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"Greg";')]),t._v("\ninstance2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayAge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//27")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br")])]),a("h2",{attrs:{id:"第十三章-事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第十三章-事件"}},[t._v("#")]),t._v(" 第十三章 "),a("strong",[t._v("事件")])]),t._v(" "),a("blockquote",[a("p",[t._v("JavaScript 与 HTML 之间的交互是通过"),a("strong",[t._v("事件")]),t._v("实现的。"),a("br"),t._v("\n可以使用"),a("strong",[t._v("侦听器")]),t._v("来预订事件，以便事件发生时执行相应的代码。（观察员模式）")])]),t._v(" "),a("h3",{attrs:{id:"_13-1-事件流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-事件流"}},[t._v("#")]),t._v(" 13.1 事件流")]),t._v(" "),a("blockquote",[a("p",[t._v("事件流描述的是从页面中接收事件的顺序")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("冒泡")]),t._v(" "),a("th",[t._v("捕获")]),t._v(" "),a("th",[t._v("DOM")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("内->外")]),t._v(" "),a("td",[t._v("外->内")]),t._v(" "),a("td",[t._v("外->内->外")])])])]),t._v(" "),a("h4",{attrs:{id:"_13-1-1-事件冒泡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-1-事件冒泡"}},[t._v("#")]),t._v(" 13.1.1 事件冒泡")]),t._v(" "),a("blockquote",[a("p",[t._v("IE 的事件流叫做"),a("strong",[t._v("事件冒泡")])])]),t._v(" "),a("p",[a("strong",[t._v("事件开始时由最具体的元素（嵌套层次最深的那个节点）接收，然后逐级向上传播到较为不具体的节点。")])]),t._v(" "),a("p",[a("code",[t._v("事件冒泡 ：<div> -> <body> -> <html> -> document")])]),t._v(" "),a("p",[t._v("所有现代浏览器都支持事件冒泡，但在具体实现上还是有一些差别。")]),t._v(" "),a("h4",{attrs:{id:"_13-1-2-事件捕获"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-2-事件捕获"}},[t._v("#")]),t._v(" 13.1.2 事件捕获")]),t._v(" "),a("blockquote",[a("p",[t._v("Netscape Communicator 提出的另一种事件流叫"),a("strong",[t._v("事件捕获")])])]),t._v(" "),a("p",[a("code",[t._v("事件捕获 ：document -> <html> -> <body> -> <div>")])]),t._v(" "),a("h4",{attrs:{id:"_13-1-3-dom-事件流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-3-dom-事件流"}},[t._v("#")]),t._v(" 13.1.3 DOM 事件流")]),t._v(" "),a("blockquote",[a("p",[t._v("DOM2 级事件流规定事件流包含三个阶段：")]),t._v(" "),a("ol",[a("li",[t._v("事件捕获阶段")]),t._v(" "),a("li",[t._v("处于目标阶段")]),t._v(" "),a("li",[t._v("事件冒泡阶段")])])]),t._v(" "),a("p",[t._v("整个流程：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("事件捕获")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("处于目标")]),t._v(" "),a("th",[t._v("事件冒泡")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("document->html->body")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("div")]),t._v(" "),a("td",[t._v("div->body->html->document")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_13-2-事件处理程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-事件处理程序"}},[t._v("#")]),t._v(" 13.2 事件处理程序")]),t._v(" "),a("blockquote",[a("p",[t._v("事件就是用户或浏览器自身执行的某种动作。响应某个事件的函数就叫做"),a("strong",[t._v("事件处理程序（或事件侦听器）")])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("事件的名字")]),t._v(" "),a("th",[t._v("事件处理程序的名字")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("click/load")]),t._v(" "),a("td",[t._v("onclick/onnload")])]),t._v(" "),a("tr",[a("td",[t._v("DOM2✅")]),t._v(" "),a("td",[t._v("HTML✅ DOM0✅ IE✅")])])])]),t._v(" "),a("h4",{attrs:{id:"_13-2-1-html-事件处理程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-1-html-事件处理程序"}},[t._v("#")]),t._v(" 13.2.1 HTML 事件处理程序")]),t._v(" "),a("blockquote",[a("p",[t._v("用一个 HTML 特性来指定 嵌入在标签中")])]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onclick")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alert(this.value)"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("this 值等于事件的目标元素")]),t._v(" "),a("li",[t._v("很多 HTML 事件处理程序会被封装在一个 try-catch 块中")])]),t._v(" "),a("h4",{attrs:{id:"_13-2-2-dom-0-级-事件处理程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-2-dom-0-级-事件处理程序"}},[t._v("#")]),t._v(" 13.2.2 DOM 0 级 事件处理程序")]),t._v(" "),a("blockquote",[a("p",[t._v("每个元素都有自己的事件处理程序属性，通常全部小写，例如 onclick 将这种属性的值设置为一个函数即可指定事件处理程序")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" btn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myBtn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[t._v("DOM 0 级 指定的事件处理程序被认为是元素的方法")])]),t._v(" "),a("h4",{attrs:{id:"_13-2-3-dom-2-级-事件处理程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-3-dom-2-级-事件处理程序"}},[t._v("#")]),t._v(" 13.2.3 DOM 2 级 事件处理程序")]),t._v(" "),a("blockquote",[a("p",[t._v("DOM 2 级事件定义了两个方法："),a("strong",[t._v("addEventListener()和 removeEventListener()")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("btn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"click"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("true = 捕获 / "),a("strong",[t._v("false = 冒泡 （默认）")])]),t._v(" "),a("li",[t._v("通过 add 添加的事件处理程序只能通过 remove 移除")])]),t._v(" "),a("h4",{attrs:{id:"_13-2-4-ie-事件处理程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-4-ie-事件处理程序"}},[t._v("#")]),t._v(" 13.2.4 IE 事件处理程序")]),t._v(" "),a("blockquote",[a("p",[t._v("IE 实现了类似 DOM 中的方法 "),a("strong",[t._v("attachEvent()/detachEvent()")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("btn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attachEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onclick"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",[t._v("与 DOM 的区别："),a("strong",[t._v("attachEvent()的 this = window!!")])])]),t._v(" "),a("h4",{attrs:{id:"_13-2-5-跨浏览器-事件处理程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-5-跨浏览器-事件处理程序"}},[t._v("#")]),t._v(" 13.2.5 跨浏览器 事件处理程序")]),t._v(" "),a("blockquote",[a("p",[t._v("依次判断顺序:")]),t._v(" "),a("ol",[a("li",[t._v("DOM2")]),t._v(" "),a("li",[t._v("IE")]),t._v(" "),a("li",[t._v("DOM0")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 参数：注册元素，事件种类，事件处理程序")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addEventListener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListner")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attachEvent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attachEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_13-3-事件对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-3-事件对象"}},[t._v("#")]),t._v(" 13.3 事件对象")]),t._v(" "),a("blockquote",[a("p",[t._v("在触发 DOM 上某个事件时，会产生一个事件对象 event，包含着与事件有关的信息。包括导致事件的元素、事件的类型及其他与特定事件相关的信息。")])]),t._v(" "),a("h4",{attrs:{id:"_13-3-1-dom-中的事件对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-3-1-dom-中的事件对象"}},[t._v("#")]),t._v(" 13.3.1 DOM 中的事件对象")]),t._v(" "),a("blockquote",[a("p",[t._v("兼容 DOM 的浏览器会将 event 对象传入事件处理程序中.")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" btn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myBtn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"click"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("this / event.currentTarget 都指向注册元素")]),t._v(" "),a("li",[t._v("event.target 指向目标元素")]),t._v(" "),a("li",[t._v("preventDefault():如阻止链接被点击会跳转等默认行为")]),t._v(" "),a("li",[t._v("stopPropagation():立刻停止事件在 DOM 层次的传播")]),t._v(" "),a("li",[t._v("event.eventPhase = 1/捕获 2/处于目标 3/冒泡")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("event 对象只有事件处理程序执行期间才会存在")])]),t._v(" "),a("h4",{attrs:{id:"_13-3-2-ie-中的事件对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-3-2-ie-中的事件对象"}},[t._v("#")]),t._v(" 13.3.2 IE 中的事件对象")]),t._v(" "),a("h4",{attrs:{id:"_13-3-3-跨浏览器-的事件对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-3-3-跨浏览器-的事件对象"}},[t._v("#")]),t._v(" 13.3.3 跨浏览器 的事件对象")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_13-4-事件类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-4-事件类型"}},[t._v("#")]),t._v(" 13.4 事件类型")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_13-5-内存和性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-5-内存和性能"}},[t._v("#")]),t._v(" 13.5 内存和性能")]),t._v(" "),a("p",[t._v("i")])])}),[],!1,null,null,null);s.default=e.exports}}]);